---
- name: install desktop package
  hosts: all

  vars:
    user_id: "{{ ansible_user_id }}"
    disable_list: [ 'temurin_jdk', 'pyenv', 'poetry' ]

    sdkman_java_version: "21.0.5-tem"
    sdkman_gradle_version: "8.9"
    
  roles:
    - role: temurin_jdk
      when: "'temurin_jdk' not in disable_list"

    - role: pyenv
      vars:
        pyenv_user: "{{ ansible_user_id }}"
        python_dev_home: "/home/{{ ansible_user_id }}"
        pyenv_version: "latest"
        pyenv_virtualenv_version: "latest"
        pyenv_install_build_deps: true

    - role: poetry
      vars:
        poetry_version: "latest"

    - role: vscode
      when: "ansible_virtualization_type != 'wsl' and 'vscode' not in disable_list"

    - role: docker
      when: "'docker' not in disable_list"
      
    - role: sdkman
      when: "'sdkman' not in disable_list"
